global

  {% if haproxy.logs is defined %}
  {% for log in haproxy.logs %}
  log {{ log }}
  {% endfor %}
  {% endif %}

  {% for key, value in haproxy.global %}
  {{ key }} {{ value }}
  {% endfor %}

defaults

  {% for key, value in haproxy.defaults %}
  {% if key == 'option' %}
  {% for option, attribute in value %}
    option {{ option }} {{ attribute }}
  {% endfor %}
  {% else %}
    {{ key }} {{ value }}
  {% endif %}
  {% endfor %}

  {% for key, value in haproxy.timeout %}
  {{ key }} {{ value }}
  {% endfor %}

  {% for frontend in haproxy.frontend.items() %}
  frontend {{ frontend }}
  {% for key, value in frontend %}
    {{ key }} {{ value }}
  {% endfor %}
  {% endfor %}
